<div class="container-fluid">
  <div class="jumbotron text-center">
      <div *ngIf="showProgress" class="form-horizontal d-flex flex-column align-items-center justify-content-center flex-wrap">
          <h2>Running Prequalification for Loans</h2>
          <circle-progress id="circ" [percent]="100" [radius]="100"
            [outerStrokeWidth]="24" [innerStrokeWidth]="16" 
            [outerStrokeColor]="'#00cc00'" [innerStrokeColor]="'blue'"
            [backgroundGradient]="true"
            [backgroundColor]="'#ffffff'"
            [backgroundGradientStopColor]="'#f3f3f3'"
            [animation]="true" [animationDuration]="5000" [titleFontSize]="30" 
            [subtitleFontSize]="15" >
          </circle-progress>
      </div>
    <form *ngIf="!showProgress"  #jumboForm="ngForm" class="form-horizontal d-flex flex-column align-items-center justify-content-start flex-wrap">
      <h2 class="col-12">Congratulations!</h2>
      <h4>You have been prequalified for<br/>a loan up to {{ purchasingPower | currency }}</h4>
      <p class="col-12 col-md-4">
        That means that you may purchase this vehicle for {{ car.sale_price | currency }}, or go back and pick an even better one!
      </p>
      <p class="col-12 col-md-4">
        In order to purchase this vehicle, you will need to pay a one time application fee of $45 so that we can apply for your loan.
        This fee will be applied to the purchase of your vehicle when you come in to pick it up any time during the next 7 business days
      </p>
      <p>
        Bear in mind that the application fee is not refundable, since we get charged by the lender to apply for your loan.
      </p>
      <div class="d-flex flex-row align-items-center justify-content-start flex-wrap">
      <img [src]="car.imageList[0]" class="col-md-6" />
      <div >
        <div class="form-group" [class.has-danger]="cardNumber.touched && cardNumber.invalid" [class.has-success]="cardNumber.valid">
          <input type="text" #cardNumber="ngModel" name="cardNumber" placeholder="{{ 'Credit Card Number' | translate }}"
            pattern="(\d{4}-{0,1}){3}\d{2,4}" [(ngModel)]="model.cardNumber" class="form-control" required mask="0000-0000-0000-0099" />
          <span *ngIf="cardNumber.touched && cardNumber.invalid" class="text-danger">Credit card number is invalid</span>
        </div>
        <div class="form-group" [class.has-danger]="cardHolder.touched && cardHolder.invalid" [class.has-success]="cardHolder.valid">
          <input type="text" #cardHolder="ngModel" name="cardHolder" placeholder="{{ 'Name on Card' | translate }}" pattern="\w{2,}\s+\w{2,}"
            [(ngModel)]="model.cardHolder" class="form-control" required />
          <span *ngIf="cardHolder.touched && cardHolder.invalid" class="text-danger" translate>Name on Card is required</span>
        </div>
        <div class="form-group" [class.has-danger]="cardExpiration.touched && cardExpiration.invalid" [class.has-success]="cardExpiration.valid">
          <input type="text" #cardExpiration="ngModel" name="cardExpiration" placeholder="{{ 'Expires' | translate }}" pattern="\d{2}/\d{2,4}"
            [(ngModel)]="model.cardExpiration" class="form-control" required />
          <span *ngIf="cardExpiration.touched && cardExpiration.invalid" class="text-danger">Enter a valid expiration date</span>
        </div>
        <div class="form-group" [class.has-danger]="securityCode.touched && securityCode.invalid" [class.has-success]="securityCode.valid">
          <input type="text" #securityCode="ngModel" name="securityCode" placeholder="{{ 'Security Code' | translate }}" pattern="\d{3,4}"
            [(ngModel)]="model.securityCode" class="form-control" required />
          <span *ngIf="securityCode.touched && securityCode.invalid" class="text-danger">The security code is required</span>
        </div>
      </div>
    </div>
      <p class="col-12 m-2">
        <button (click)="back()" class="btn btn btn-secondary">
          <i class="fas fa-chevron-left"></i>
          Back
        </button>
        <button class="btn btn-success btn-2x m-2" (click)="purchase()">
          Pay Application Fee of $45 <i class="fas fa-chevron-right"></i>
        </button>
      </p>
    </form>
     
  </div>
</div>
